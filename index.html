<!--
A Ráckevei–Soroksári-Duna interaktív vízisport-térképe

(C) 2021 Bakó Tamás & Mátyás Gede, ELTE Eötvös Loránd University, Budapest

This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.

-->
<!doctype html>
<html>

	<head>
	
		<title>Soroksári-Duna</title>
		<link rel="shortcut icon" type="image/png" href="imagemap/location.png"/>

		<meta charset="utf-8">
		<link rel="stylesheet" href="leaflet/leaflet.css" />
		<script src="leaflet/leaflet.js"></script>
		<script src="https://unpkg.com/leaflet.vectorgrid@latest/dist/Leaflet.VectorGrid.bundled.js"></script>
        <script src="https://unpkg.com/geobuf@3.0.2/dist/geobuf.js"></script>
        <script src="https://unpkg.com/pbf@3.0.5/dist/pbf.js"></script>
		
		<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
		<script src="https://cdn.maptiler.com/mapbox-gl-js/v1.5.1/mapbox-gl.js"></script>
		<script src="https://cdn.maptiler.com/mapbox-gl-leaflet/latest/leaflet-mapbox-gl.js"></script>
		<link rel="stylesheet" href="https://cdn.maptiler.com/mapbox-gl-js/v1.5.1/mapbox-gl.css" />

		<!--Kereséshez-->
		<script src='https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.10.1/lodash.min.js'></script>

		<!--Betűtípusok-->
		<link rel="preconnect" href="https://fonts.gstatic.com">
		<link href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet"> 

		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">


		<!--Útvonaltervhez-->
		<script src="https://npmcdn.com/leaflet-geometryutil"></script>
		

		<style>

			.leaflet-control-layers {
				box-shadow: 0px 0px 15px #9c9c9c2d;
				background-color: #ffffffbe;
				backdrop-filter: blur(30px);
				transition: 0.1s linear;
				cursor: text;
				border-radius: 25px;
				border: none;
				outline: none;
				}

			.leaflet-control-layers-expanded {
				border-radius: 5px;
			}

			.leaflet-control-zoom {
				display: none;
			}

			@media (orientation: portrait) {
				.leaflet-control-layers {	
					top: 60px;
				}
			}

			.leaflet-control-attribution {
				display: none;
			}

			html {
				margin: 0;
				padding: 0;
				border: none;
				font-family: 'Oswald', sans-serif;
			}
		
			body  {
				margin: 0;
				padding: 0;
				border: none;
				min-width: 250px;
			}
		
			#terkep_helye {
				cursor: default;
				width: 100%;
				height: 100vh;
				margin: 0;
				border: none;
				z-index: 1;
			}
			
			
			#attekintoterkep {				
				border-radius: 12px;
				background-color: #ffffff44;
				backdrop-filter: blur(10px);
				-webkit-backdrop-filter: blur(10px);
				box-shadow: 0px 0px 15px #3534342d;
				max-width: 500px;
				width: calc(100vh - 30px);
				display: none;
				position: absolute;
				top: 156px;
				left: 60px;
				z-index: 999000;
				padding: 0;					
				max-height: 100vh;
			}
            
			@media (orientation: portrait) {
				#attekintoterkep {
                    bottom: 12px;
					top: auto;
					left: 50%;
					transform: translate(-50%, 0%);
                    width: 95vw;
				}

				#sav {
					width: calc(100% - 10px);
				}
			}
			            
			#attekintokep {
				border-radius: 20px;
				width: 100%;
			}

			#kezdopontcimke {
				cursor: default;
				display: none;
				height: 30px;
				border-radius: 50px;
				padding-right: 15px;
				padding-left: 15px;
				font-size: 14px;
				text-align: center;
				line-height: 27px;
				color: #FFFFFF;
				background-color: #222222b0;
				border: none;
				box-shadow: 0px 0px 5px #AAAAAA;
				position: absolute;
				left: 50%;
				bottom: 20px;
				transform: translate(-50%, 0%);
				z-index: 900;
			}

			#vegpontcimke {
				cursor: default;
				display: none;
				height: 30px;
				border-radius: 50px;
				padding-right: 15px;
				padding-left: 15px;
				font-size: 14px;
				text-align: center;
				line-height: 27px;
				color: #FFFFFF;
				background-color: #222222b0;
				border: none;
				box-shadow: 0px 0px 5px #AAAAAA;
				position: absolute;
				left: 50%;
				bottom: 20px;
				transform: translate(-50%, 0%);
				z-index: 900;
			}
	
			#kilepescimke {
				cursor: pointer;
				display: block;
				width: 40px;
				border-radius: 50px;
				font-size: 16px;
				line-height: 32px;
				text-align: center;
				color: #FFFFFF;
				background-color: #7CB6F0;
				border: none;
				box-shadow: 0px 0px 10px #9c9c9c2d;
			}

			#kilepescimke:hover {
				background-color: #5798da;
				box-shadow: 0px 0px 15px #5555552d;
			}

			#utvonaladatok {
				flex-direction: column;
				border-radius: 12px;
				background-color: #ffffff44;
				backdrop-filter: blur(10px);
				-webkit-backdrop-filter: blur(10px);
				box-shadow: 0px 0px 15px #3534342d;
				cursor: default;
				display: none;
				width: 300px;
				padding: 5px 5px 5px 5px;
				position: absolute;
				left: 50%;
				bottom: 20px;
				transform: translate(-50%, 0%);
				z-index: 999;
			}

			#utvonaladatoklap{
				padding: 8px;
				align-self: center;
				width: calc(100% - 20px);
				display: flex;
				flex-direction: column;
				align-items: center;
			}

			.papirlap {
				width: 100%;
				background-color: #ffffff;
				border: 1px solid #ffffff55; 
				color: #313131;
				font-size: 12px;
				border-radius: 6px;
				box-shadow: 0px 0px 15px #9c9c9c2d;
			}

			#sliderimage {
					max-width: 80%;
					object-fit: scale-down;
					margin-bottom: 20px;
				}

			@media (orientation: portrait) {
				#utvonaladatok {
					width: calc(100% - 10px);
					transform: translate(0%, 0%);
					left: 0%;
					bottom: 0px;
					border-radius: 0px;
					margin: 0px;
					border: none;
					padding-bottom: 10px;
				}

				#sliderimage {
					max-height: 60px;
					object-fit: scale-down;
				}
			}

			#utvonalopciok {
				background-color: #FFFFFF;
			}

			#gyorsasagcsuszka {
				width: 75%;
				margin: 12px auto auto auto;
			}
			
			input[type=range] {
				-webkit-appearance: none;
				width: 100%;
				background: none;
			}

			input[type=range]::-webkit-slider-thumb {
				-webkit-appearance: none;
			}

			input[type=range]:focus {
				outline: none;
			}

			input[type=range]::-ms-track {
				width: 100%;
				cursor: pointer;
				background: transparent;
				border-color: transparent;
				color: transparent;
			}

			#slider {
				-webkit-appearance: none;
				direction: rtl;
				display: inline;
				width: 100%;
				height: 10px;
				border-radius: 5px;  
				background: #d1d1d1;
				outline: none;
				opacity: 0.4;
				-webkit-transition: .2s;
				transition: opacity .2s;
			}

			#slider:hover {
				opacity: 1;
				background: #cde1ff;
			}

			#slider::-webkit-slider-thumb {
				-webkit-appearance: none;
				appearance: none;
				width: 10px;
				height: 10px;
				border-radius: 5px;
				background: #5a82be;
				cursor: pointer;
				outline: none;
			}

			#slider::-moz-range-thumb {
				width: 10px;
				height: 10px;
				border-radius: 5px;
				background: #5a82be;
				cursor: pointer;
				outline: none;
			}

			#slider::-webkit-slider-thumb:active {
				background: #FFFFFF;
			}

			#slider::-moz-range-thumb:active {
				background: #FFFFFF;
			}

			#hajourlapablak {
				display: none;
				position: absolute;
				width: auto;
				left: 50%;
				bottom: 250px;
				transform: translate(-50%, 0%);
				z-index: 999;
				padding: 10px;
			}

			#hajourlapmegnyitas {
				margin: 12px auto 20px auto;
				width: 80%;
				background-color: #00000033;
				box-shadow: none;
				border: 1px solid #ffffff55;
				color: white;
				cursor: pointer;
				height: 28px;
				line-height: 28px;
				border-radius: 20px;
				text-align: center;
				margin-bottom: 20px;
			}

			#hajourlapmegnyitas:hover {
				background-color: #0000004b;
			}

			#jelmagyarazat {
				display: none;
				max-width: calc(100vw - 20px);
				max-height: calc(100vh - 20px);
				position: absolute;
				transform: translate(-50%, 50%);
				bottom: 50vh;
				left: 50vW;
				z-index: 999000;
				padding: 0;
			}

			#nevjegy {
				display: none;
				max-width: calc(100vw - 20px);
				max-height: calc(100vh - 20px);
				position: absolute;
				transform: translate(-50%, 50%);
				bottom: 50vh;
				left: 50vW;
				z-index: 999000;
				padding: 0;
			}

			/*KERESÉS*/
			#keresestarto {
				display: flex;
				flex-direction: column;
				align-items: center;
				position: absolute;
				background: none;
				margin: 0px;
				padding: 0px;
				top: 14px;
				left: 60px;
				width: 220px;
				height: auto;
				z-index: 1000;
				max-height: calc(100vh - 40px);
			}

			@media (orientation: portrait) {
				#keresestarto {
					left: 50px;
					width: calc(100vw - 100px);
				}
			}

			#sav {
				display: flex;
				flex-direction: row;
				align-self: stretch;
				margin: 0;
				height: 32px;
				padding: 0px 0px 0px 10px;
				border: none;
				box-shadow: 0px 0px 15px #9c9c9c2d;
				font-weight: 400;
				color: #636363;
				font-size: 16px;
				z-index: 1000;
				border-radius: 50px;
				background-color: #ffffffbe;
				backdrop-filter: blur(30px);
				transition: 0.1s linear;
				cursor: text;
			}

			#sav:hover {
				background-color: #ffffff6e;
			}

			#keresomezo{
				display: none;
				width: 190px;
				height: 30px;
				background-color: #ffffff00;
				border: none;
				color: white;
				font-size: 16px;
				outline: none;
				padding-left: 32px;
				padding-bottom: 5px;
			}

			#keressgomb {
				display: none;
				color: white;
				background-color:  #ffffff6c;
				border: none;
				border-radius: 50px;
				position: absolute;
				top: 3px;
				right: 3px;
				cursor: pointer;
			}

			#keressgomb:hover {
				color: gray;
				background-color:  #ffffff;
			}

			#keresesvissza {
				display: none;
				color: white;
				background-color:  rgba(255, 255, 255, 0);
				border: none;
				border-radius: 50px;
				position: absolute;
				top: 24px;
				left: 36px;
				cursor: pointer;
				z-index: 2000;
			}

			#keresesvissza:hover {
				color: gray;
				background-color:  #ffffff;
			}

			@media (orientation: portrait) {
				#keresesvissza {
					left: calc(10% + 3px);
				}
			}

			#kereses {
				display: none;
				grid-template-columns: repeat(2, minmax(0, 1fr));
				grid-template-areas:
					'cshResz bufeResz'
					'hotelResz tovabbiResz'
					'sajathelyResz sajathelyResz'
					'utvonalResz utvonalResz';
				margin-top: 20px;
				align-content: start;
				column-gap: 8px;
				row-gap: 8px;
				border: none;
				width: 100%;
				font-weight: 400;
				color: #636363;
				font-size: 14px;
				background-color: #ffffff00;
			}

			#cshResz { grid-area: cshResz; }
			#bufeResz { grid-area: bufeResz; }
			#hotelResz { grid-area: hotelResz; }
			#tovabbiResz { grid-area: tovabbiResz; }
			#sajathelyResz { grid-area: sajathelyResz; }
			#utvonalResz { grid-area: utvonalResz; }

			.keresesresz {
				display: flex;
				flex-direction: row;
				align-items: center;
				height: 40px;
				border-radius: 6px;
				background-color: #ffffffce;
				backdrop-filter: blur(300px);
				-webkit-backdrop-filter: blur(300px);
				cursor: pointer;
			}

			.keresesresz:hover {
				background-color: #ffffffe5;
			}

			.nagykeresesresz {
				padding-right: 20px;
				justify-content: center;
			}

			.keresesreszkep {
				height: 40px;
			}

			#talalatok {
				display: none;
				align-self: center;
				padding: 0px;
				margin-top: 20px;
			}

			#talalatlista {
				margin: 0px;
				padding: 4px 0px 4px 0px;
				width: 100%;
				list-style-type: none;
				max-height: calc(100vh - 400px);
				display: flex;
				flex-direction: column;
				overflow: auto;
			}

			#talalatlista li {
				padding: 4px 8px;
				cursor: pointer;
			}

			#talalatlista li:hover {
				background-color: #7CB6F0;
				color: white;
			}

			/*OLDALSÁV*/		
			#oldalsav {
				display: flex;
				flex-direction: column;
				align-items: stretch;
				height: calc(100vh - 5px);
				width: 50px;
				max-width: 295px;
				padding: 5px 0px 0px 0px;
				position: absolute;
				left: 0px;
				z-index: 500;
				background-color: #ffffffbe;
				backdrop-filter: blur(30px);
				transition: width 0.3s;
			}

			@media (orientation: portrait) {
				#oldalsav {
					display: none;
					max-width: none;
				}
			}

			.menuelem {
				cursor: pointer;
				display: flex;
				flex-direction: row;
			}

			.menuelem:hover {
				background-color: #bddeffa9;
			}

			.menuelemgomb {
				cursor: pointer;
				width: 24px;
				margin: 13px;
				border-radius: 5px;
				border: none;
				z-index: 9999;
			}

			.nyomottgomb {
				background-color: #7CB6F0;
				color: #FFFFFF;
			}

			.nyomottgomb:hover {
				background-color: #5798da;
			}

			.menuelemszoveg {
				display: none;
				line-height: 50px;
				margin-left: 13px;
			}

			/*FELSŐ SÁV*/
			#felsosav {
				background-color: #ffffff71;
				position: absolute;
				height: 60px;
				display: flex;
				justify-content: space-between;
				width: 100vw;
				z-index: 300;
				backdrop-filter: blur(15px);
				box-shadow: 0px 0px 15px #9c9c9c2d;
			}

			@media (orientation: landscape) {
				#felsosav {
					display: none;
				}
			}



			/*IDŐJÁRÁS*/
			#container {
				height: 30px;
				display: flex;
				align-items: center;
				justify-content: space-between;
				flex-direction: row;
				background-color: #ffffff71;
				box-shadow: 0px 0px 15px #aaaaaa38;
				color: #2e2e2e;
				font-size: 18px;
				z-index: 1000;
				text-align: center;
				border-radius: 6px;
				backdrop-filter: blur(15px);
				position: absolute;
				bottom: 15px;
				left: 65px;
				z-index: 711;
				padding: 0px 8px 0px 0px;
				transition: 0.3s linear;
				cursor: default;
			}

			@media (orientation: portrait) {
				#container {
					left: auto;
					right: 15px;	
				}
			}

			#weather-icon {
				height: 30px;
				margin: 0;
			}

			.weather {
				display: flex;
				flex-direction: row;
				align-items: center;
				margin: 0;
			}

			#location {
				display: none;
				color: #666666;
				font-size: 14px;
				margin-left: 10px;
			}

			.desc {
				display: none;
			}
			/*IDŐJÁRÁS VÉGE*/
			
		</style>
		
	</head>
	
	<body>		
		<!--Sáv-->
		<div id="keresestarto">
			<input type="button" id="keresesvissza" onclick="javascript:closeAll()" class="material-icons" value="&#xe5c4;">

			<div id = "sav" onclick="javascript:kereseslapmegnyitas()">
				<div style="line-height: 34px;" class="material-icons helykitolto">&#xe8b6;</div>
				<div style="line-height: 34px; margin-left: 5px;" class="helykitolto">Keresés..</div>
				
				<input type="text" id="keresomezo" list="javaslatok" autocomplete="on"  onkeyup="if (event.keyCode==13) keress()" onchange="hint(this.value)" placeholder="Keresés.." name="keresomezo" value="">
				<input type="button" id="keressgomb" onclick="javascript:keress()" class="material-icons" value="&#xe8b6;">
				<datalist id="javaslatok" onchange="console.log(this.value)"></datalist>
				
			</div>

			<div id="kereses">
				<div id="cshResz" class="keresesresz" onclick="javascript:keresstipust('csh')">
					<img class="keresesreszkep" src="imagemap/csh.png"> Csónakházak
				</div>
				<div id="bufehResz" class="keresesresz" onclick="javascript:keresstipust('etterem')">
					<img class="keresesreszkep" src="imagemap/etterem.png"> Büfék
				</div>
				<div id="hotelResz" class="keresesresz" onclick="javascript:keresstipust('hotel')">
					<img class="keresesreszkep" src="imagemap/hotel.png"> Szálláshelyek
				</div>
				<div id="tovabbiResz" class="keresesresz" onclick="javascript:keresstipust('')">
					<img class="keresesreszkep" src="imagemap/csillag.png"> Továbbiak
				</div>
				<div id="sajathelyResz" class="keresesresz nagykeresesresz" onclick="javascript:getLocationLeaflet()">
					<img class="keresesreszkep" src="imagemap/location.png"> Saját pozíció keresése
				</div>
				<div id="utvonalResz" class="keresesresz nagykeresesresz" onclick="javascript:aPontKijeloles()">
					<img class="keresesreszkep" src="imagemap/utvonalterv.png"> Vízi útvonaltervezés
				</div>
			</div>

			<div class="papirlap" id="talalatok">
				<ul id="talalatlista"></ul>
			</div>
		</div>

		<!--Felsősáv-->
		<div id = 'felsosav'>

			<img id="menugombfelso" class='menuelemgomb' onClick="javascript:openmenu();" src="imagemap/menu.svg" title="Menü">
						
			<img id='utvonalfelso' class='menuelemgomb menuelem' src="imagemap/utvonalterv.svg" title="Útvonaltervezés" onClick="javascript:aPontKijeloles();">
				
			<img id='xutvonalfelso' style="display: none;" class='menuelemgomb nyomottgomb' src="imagemap/utvonalterv_feher.svg" title = "Útvonalterv megszakítása" onClick="javascript:kilepes()">
		
		</div>

		<!--Oldalsáv-->
		<div id = 'oldalsav'>

			<img id="menugomb" class='menuelemgomb' onClick="javascript:openmenu();" src="imagemap/menu.svg" title="Menü">
			<img id="menubezarasgomb" class="menuelemgomb" onClick = "javascript:closemenu();" src="imagemap/exit.svg" style="display: none;">

			<div id="helygomb" class="menuelem" onClick="javascript:getLocationLeaflet();">
				<img class="menuelemgomb" src = "imagemap/pozicionalas.svg" title = "Helymeghatározás">
				<div class="menuelemszoveg">Helymeghatározás</div>
			</div>

			<div id="helyesgomb" class="menuelem nyomottgomb" style="display: none;" onClick="javascript:getLocationLeaflet();">
				<img class="menuelemgomb" src = "imagemap/pozicio_feher.svg" title = "Helymeghatározás">
				<div class="menuelemszoveg">Helymeghatározás</div>
			</div>

			<div id="utvonaltervgomb" class="menuelem" onClick="javascript:aPontKijeloles();">
				<img class='menuelemgomb' src="imagemap/utvonalterv.svg" title="Útvonaltervezés">
				<div class="menuelemszoveg">Útvonaltervezés</div>
			</div>

			<div id="xutvonaltervgomb" class="menuelem nyomottgomb" style="display: none;" onClick="javascript:kilepes()">
				<img class='menuelemgomb'  src="imagemap/utvonalterv_feher.svg" title = "Útvonalterv megszakítása">
				<div class="menuelemszoveg">Útvonaltervezés</div>
			</div>
			
			<div id="attekintomegnyitas" class="menuelem" onClick="javascript:showOverview();">
				<img class='menuelemgomb' src="imagemap/attekinto.svg" title="Áttekintőtérkép">
				<div class="menuelemszoveg">Áttekintőtérkép</div>
			</div>

			<div id="attekintobezaras" class="menuelem nyomottgomb" style="display: none;" onClick="javascript:closeAll()">
				<img class='menuelemgomb'  src="imagemap/attekinto_feher.svg" title = "Áttekintőtérkép Bezárása">
				<div class="menuelemszoveg">Áttekintőtérkép</div>
			</div>

			<img id="egyebgomb" class='menuelemgomb' onClick="javascript:openmenu();" src="imagemap/egyeb.svg" title="Továbbiak">
			
			<div id="jelmagyarazatmegnyitas" class="menuelem" onClick="javascript:openLegend();" style="display: none;">
				<img class='menuelemgomb' src="imagemap/jelmagyarazat.svg" title="Jelmagyarázat">
				<div class="menuelemszoveg">Jelmagyarázat</div>
			</div>

			<div id="jelmagyarazatbezaras" class="menuelem nyomottgomb" style="display: none;" onClick="javascript:closeAll()">
				<img class='menuelemgomb'  src="imagemap/jelmagyarazat_feher.svg" title = "Jelmagyarázat Bezárása">
				<div class="menuelemszoveg">Jelmagyarázat</div>
			</div>

			<div id="nevjegymegnyitas" class="menuelem" onClick="javascript:openCredits();" style="display: none;">
				<img class='menuelemgomb' src="imagemap/nevjegy.svg" title="Névjegy">
				<div class="menuelemszoveg">Névjegy</div>
			</div>

			<div id="nevjegybezaras" class="menuelem nyomottgomb" style="display: none;" onClick="javascript:closeAll()">
				<img class='menuelemgomb'  src="imagemap/nevjegy_feher.svg" title = "Névjegy Bezárása">
				<div class="menuelemszoveg">Névjegy</div>
			</div>

		</div>

		<!--Útvonalterv-->
		<div id="kezdopontcimke">Kezdőpont megadása</div>
		<div id="vegpontcimke">Végpont megadása</div>

		<div id="utvonaladatok" onload="bPontLerakas()">

			<!--<select id="hajoseb" placeholder="válassz hajótípust" onchange="...">
                <option value="1.9">Páros túrakenu</option>
                <option value="19">Motorcsónak</option>
            </select><br/>-->
            <div id="hajourlapmegnyitas" title="Hajótípus kiválasztása" onclick="javasript:openHajourlap()">Kétszemélyes túrakenu</div>
			<div class="papirlap" id="utvonaladatoklap" style="text-align: center;">Evezési tempó
				<div id="gyorsasagcsuszka">
					<input onchange="idokiszamitas()" type="range" min="9" max="11" value="10" id="slider">
				</div>
				<img id="sliderimage" src="imagemap/sliderv2.png">
				<div style="display: flex; width: 100%; justify-items: space-between;">
					<div style="width: 100%; display: flex; flex-direction: column; align-items: flex-start;">
						<div>Az útvonal teljes hossza: <span id="tavolsag"></span> km</div>
						<div onload="idokiszamitas()">Időtartam: <span id="idotartam"></span> perc</div>	
					</div>
					<div id="kilepescimke" onclick = "javascript:kilepes()">OK</div>
				</div>
			</div>
		</div>
		
		<div id="hajourlapablak" class="papirlap" onclick="javasript:closeHajourlap()">
			<div style="z-index: 500;"></div>
			<form id="hajourlap" onchange="idokiszamitas()">
				<label><input type="radio" name="hajotipus" class="hajotipusvalasztogomb" onclick="hajonev('Kétszemélyes túrakenu')" value="1.9" id="turakenuparos" checked>Kétszemélyes túrakenu</label><br>
				<label><input type="radio" name="hajotipus" class="hajotipusvalasztogomb" onclick="hajonev('Négyszemélyes túrakenu')" value="2.1" id="turakenunegyes">Négyszemélyes túrakenu</label><br>
				<label><input type="radio" name="hajotipus" class="hajotipusvalasztogomb" onclick="hajonev('Túrakajak egyes')" value="2.2" id="turakajakegyes">Túrakajak egyes</label><br>
				<label><input type="radio" name="hajotipus" class="hajotipusvalasztogomb" onclick="hajonev('Túrakajak páros')" value="2.5" id="turakajakparos">Túrakajak páros</label><br>
				<label><input type="radio" name="hajotipus" class="hajotipusvalasztogomb" onclick="hajonev('Sárkányhajó')" value="2.4" id="sarkanyhajo">Sárkányhajó</label><br>
				<label><input type="radio" name="hajotipus" class="hajotipusvalasztogomb" onclick="hajonev('SUP deszka')" value="2" id="sup">SUP deszka</label>
			</form>
		</div>

		<!--Áttekitőtérkép-->
		<div id = "attekintoterkep">
			<img id="attekintokep" src="imagemap/attekintov3.png" >
				<a onclick="javascript:tassizsilip();" style="width:20.7%; height:5.6%; left:46.0%; top:92.1%; position:absolute; cursor:pointer; display:block; z-index:5; overflow:hidden;"></a>
				<a onclick="javascript:domsod();" style="width:23.1%; height:5.8%; left:49.4%; top:81.7%; position:absolute; cursor:pointer; display:block; z-index:5; overflow:hidden;"></a>
				<a onclick="javascript:rackeve();" style="width:24.4%; height:5.9%; left:14.9%; top:66.8%; position:absolute; cursor:pointer; display:block; z-index:5; overflow:hidden;"></a>
				<a onclick="javascript:szigetszentmarton();" style="width:40.0%; height:5.8%; left:2.7%; top:52.0%; position:absolute; cursor:pointer; display:block; z-index:5; overflow:hidden;"></a>
				<a onclick="javascript:majoshaza();" style="width:27.9%; height:5.7%; left:47.9%; top:44.7%; position:absolute; cursor:pointer; display:block; z-index:5; overflow:hidden;"></a>
				<a onclick="javascript:dunavarsany();" style="width:31.4%; height:5.7%; left:55.7%; top:34.8%; position:absolute; cursor:pointer; display:block; z-index:5; overflow:hidden;"></a>
				<a onclick="javascript:dunaharaszti();" style="width:32.1%; height:5.7%; left:61.8%; top:25.1%; position:absolute; cursor:pointer; display:block; z-index:5; overflow:hidden;"></a>
				<a onclick="javascript:soroksar();" style="width:26.1%; height:5.6%; left:66.6%; top:15.5%; position:absolute; cursor:pointer; display:block; z-index:5; overflow:hidden;"></a>
				<a onclick="javascript:csepel();" style="width:21.7%; height:5.5%; left:42.2%; top:13.7%; position:absolute; cursor:pointer; display:block; z-index:5; overflow:hidden;"></a>
				<a onclick="javascript:pesterzsebet();" style="width:31.4%; height:5.7%; left:63.8%; top:7.7%; position:absolute; cursor:pointer; display:block; z-index:5; overflow:hidden;"></a>
				<a onclick="javascript:kvassayzsilip();" style="width:25.3%; height:5.5%; left:30.7%; top:1.5%; position:absolute; cursor:pointer; display:block; z-index:5; overflow:hidden;"></a>		
		</div>

		<!--Jelmagyarázat-->
		<img src="imagemap/jelmagyarazat.png" alt="Jelmagyarázat" id="jelmagyarazat" onclick="javascript:closeLegend()">

		<!--Névjegy-->
		<img src="imagemap/nevjegy.png" alt="Névjegy" id="nevjegy" onclick="javascript:closeCredits()">

		<!--Időjárás-->
		<div id="container">
			<span style="display: flex; flex-direction: row;">
				<img src="" alt="" srcset="" id="weather-icon">
				<div class="desc">No Information Available.</div>
				<div class="weather">
					<div class="c">---</div>
				</div>
			</span>
			<div id="location">Nem található</div>
		</div>

		<!--Leaflet térkép helye-->
		<div id = "terkep_helye"></div>
		
		<script>
			//Stílus az ikonoknak
			var helyIkon = L.icon({
				iconUrl: 'imagemap/location.png',
				iconSize: [40, 40]
			});

			var hotelIkon = L.icon({
				iconUrl: 'imagemap/hotel.png',
				iconSize: [40, 40], popupAnchor: [0, -10], tooltipAnchor: [10, 0]
			});

			var etteremIkon = L.icon({
				iconUrl: 'imagemap/etterem.png',
				iconSize: [40, 40], popupAnchor: [0, -10], tooltipAnchor: [10, 0]
			});

			var cshIkon = L.icon({
				iconUrl: 'imagemap/csh.png',
				iconSize: [40, 40], popupAnchor: [0, -10], tooltipAnchor: [10, 0]
			});

			var strandIkon = L.icon({
				iconUrl: 'imagemap/strand.png',
				iconSize: [40, 40], popupAnchor: [0, -10], tooltipAnchor: [10, 0]
			});

			var vmIkon = L.icon({
				iconUrl: 'imagemap/vm.png',
				iconSize: [40, 40], popupAnchor: [0, -10], tooltipAnchor: [10, 0]
			});

			var szoborIkon = L.icon({
				iconUrl: 'imagemap/szobor.png',
				iconSize: [40, 40], popupAnchor: [0, -10], tooltipAnchor: [10, 0]
			});

			var limanyIkon = L.icon({
				iconUrl: 'imagemap/limany.png',
				iconSize: [40, 40]
			});

			var fkmIkon = L.icon({
				iconUrl: 'imagemap/fkm.png',
				iconSize: [40, 40]
			});

			var kotelezomegallasIkon = L.icon({
				iconUrl: 'imagemap/kotelezomegallas.png',
				iconSize: [40, 40]
			});

			var kompIkon = L.icon({
				iconUrl: 'imagemap/komp.png',
				iconSize: [40, 40]
			});

			var felsovezetekIkon = L.icon({
				iconUrl: 'imagemap/felsovezetek.png',
				iconSize: [40, 40]
			});	
			
			var tiloskikotniIkon = L.icon({
				iconUrl: 'imagemap/felsovezetek.png',
				iconSize: [40, 40]
			});	
			
			//Térképobjektum
			var map = L.map('terkep_helye',{
				maxZoom: 20,
				//maxBounds: [[47.479872, 18.936847],[46.992220, 19.136007]]
			}).setView([47.43421, 19.08799], 17);

			//Rétegsorrend
			map.createPane('novenyzetpane');
			map.getPane('novenyzetpane').style.zIndex = 220;
			map.createPane('parttipusokpane');
			map.getPane('parttipusokpane').style.zIndex = 225;
			map.createPane('kikotohelypane');
			map.getPane('kikotohelypane').style.zIndex = 230;	

			//Maptiler vector tile réteg: háttértérkép
			var gl = L.mapboxGL({
				attribution: "\u003ca href=\"https://www.maptiler.com/copyright/\" target=\"_blank\"\u003e\u0026copy; MapTiler\u003c/a\u003e \u003ca href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\"\u003e\u0026copy; OpenStreetMap contributors\u003c/a\u003e",
				//style: 'https://api.maptiler.com/maps/38f29785-a56d-4c2b-83e8-fbb072cd44a1/style.json?key=0t17Kubt2gQetLAE415b'
				style: 'https://api.maptiler.com/maps/40b1d6d8-b613-4fa2-b62a-8972acd989a4/style.json?key=0t17Kubt2gQetLAE415b'
			}).addTo(map);

			//Google műholdkép réteg
			var googleSat = L.tileLayer('https://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}',{
   				maxZoom: 20,
    			subdomains:['mt0','mt1','mt2','mt3']
			});
			
			// batimetria színei
            var colors=[
                { d: 5, c: 'rgb(1,87,155)' },
                { d: 4, c: 'rgb(2,109,189)' },
                { d: 3, c: 'rgb(5,115,213)' },
                { d: 2.5, c: 'rgb(11,128,235)' },
                { d: 2, c: 'rgb(18,149,244)' },
                { d: 1.5, c: 'rgb(41,182,246)' },
                { d: 1, c: 'rgb(79,195,247)' },
                { d: 0.6, c: 'rgb(129,212,250)' },
                { d: 0.4, c: 'rgb(179,229,252)' },
                { d: 0.2, c: 'rgb(235,245,254)' }
            ]
            function depthcolor(d) {
                for (var i=0;i<colors.length;i++)
                    if (d>=colors[i].d)
                        return colors[i].c;
                return 'rgb(240,248,254)';
            }
            var t0=new Date()
            // RSD vízmélység vector tile réteg
            var vl=L.vectorGrid.protobuf('depthtiles/{z}/{x}/{y}.pbf', {
                maxZoom: 20,
                maxNativeZoom: 15,
                interactive: true,
                vectorTileLayerStyles: {
                    depth: function(p,z) {
                        return {
                            weight: 0,
                            fillColor: depthcolor(parseFloat(p.ELEVATION)),
                            fillOpacity: 1,
                            fill: true
                        }
                    }
                }
            }).addTo(map);
			vl.bindPopup(f=>'vízmélység '+f.properties.NAME+' m');
            
			//Rétegkezelő
			var alap = {'Térkép': gl, 'Műhold': googleSat};
			//var fedveny = {'Kiötőhelyek': kikotohely};
			var retegkezelo = L.control.layers(alap).addTo(map);

			//geoJSON réteg: Növényzet
			fetch('layers/rsdNovenyzet.geojson').then(r=>r.json()).then(function(data) {
			var novenyzet = L.geoJSON(data, { pane: 'novenyzetpane',
				style: function(feature) {
					switch (feature.properties.tipus) {
						case 'hinar': return {color: "#B8FFEC", fillOpacity: 0.2, opacity: 0.5,};
						case 'nad': return {color: "#BFF8C7", fillOpacity: 1, opacity: 0.5,};
					}
				}
			}).addTo(map);
			retegkezelo.addOverlay(novenyzet, 'Növényzet');
			});

			//geoJSON réteg: Hidak
			fetch('layers/rsdHidak.geojson').then(r=>r.json()).then(function(data) {
			var hidak = L.geoJSON(data, {
				style: function(feature) {
					switch (feature.properties.tipus) {
						case 'kozlekedes': return {color: "#FFFFFF", opacity: 1, weight: 8,};
						case 'kozmuvezetek': return {color: "#FFFFFF", opacity: 0.8,  weight: 2,};
						case 'komp': return {color: "#0046b8", opacity: 0.5,  weight: 2, dashArray: [2, 6,],};
						case 'felsovezetek': return {color: "#000000", opacity: 0.5,  weight: 2, dashArray: [2, 6,],};
					}
				}
			}).addTo(map);
			});

			//geoJSON réteg: Parttípusok
			fetch('layers/rsdParttipusok.geojson').then(r=>r.json()).then(function(data) {
			var parttipusok = L.geoJSON(data, { pane: 'parttipusokpane',
				style: function(feature) {
					switch (feature.properties.tipus) {
						case 'lankas': return {color: "#EBE4A9", opacity: 1, weight: 5,};
						case 'meredek': return {color: "#BBB393", opacity: 1,  weight: 5,};
						case 'alamosott': return {color: "#BBB393", opacity: 1,  weight: 5, dashArray: [8, 10,],};
						case 'felhanyt': return {color: "#BFBFBF", opacity: 1,  weight: 5, dashArray: [8, 10,],};
						case 'lejtos': return {color: "#7F7F7F", opacity: 1,  weight: 5, dashArray: [8, 10,],};
						case 'fuggoleges': return {color: "#404040", opacity: 1,  weight: 5, dashArray: [8, 10,],};
						case 'javitott': return {color: "#5B9BD5", opacity: 1, weight: 5,};
					}
				}
			}).addTo(map);
			retegkezelo.addOverlay(parttipusok, 'Partvonal');
			});

			//geoJSON réteg: Kikötőhelyek
			var kikotohely;
			fetch('layers/rsdKikotohelyek.geojson').then(r=>r.json()).then(function(data) {
			kikotohely = L.geoJSON(data, { pane: 'kikotohelypane',
				style: function(feature) {
					switch (feature.properties.tipus) {
						case 'steg': return {color: "#CC99FF", fillOpacity: 1, opacity: 1,};
						case 'ponton': return {color: "#F69BFD", fillOpacity: 1, opacity: 1,};
						case 'magassteg': return {color: "#000000", fillColor: "#CC99FF", fillOpacity: 1, opacity: 0.5,};
						case 'allohajo': return {color: "#7F6387", fillOpacity: 1, opacity: 1,};
						case 'molo': return {color: "#D9D9D9", fillOpacity: 1, opacity: 1,};
						case 'rom': return {color: "#000000", fillOpacity: 0, opacity: 0.5,};
					}
				}
			})
			.addTo(map);
			retegkezelo.addOverlay(kikotohely, 'Kikötőhelyek');
			});

			//geoJSON réteg: Alappont
			var alappontIkonok={
				'fkm': fkmIkon,
				'limany': limanyIkon,
				'tablakomp': kompIkon,
				'tablamegallas': kotelezomegallasIkon,
				'tablatiloskikotni': tiloskikotniIkon,
				'tablavezetek': felsovezetekIkon
			}
			/*fetch('layers/rsdAlappont.geojson').then(r=>r.json()).then(function(data) {
			var alappont = L.geoJSON(data, {
				pointToLayer: function(f,ll) {
					return L.marker(ll,{icon: alappontIkonok[f.properties.tipus]})
				}
			})
			.bindTooltip(function (layer)
				{return String(layer.feature.properties.nev)},
				{permanent: false, opacity: 0.9}
			)
			.addTo(map);
			retegkezelo.addOverlay(alappont, 'Alappontok');
			});*/
			
            var x=new XMLHttpRequest();
            x.open('get','layers/rsdAlappont.geojson',false);
            x.send();
            // válasz értelmezése
            var valasz=JSON.parse(x.responseText);
            L.geoJSON(valasz,{
                    pointToLayer: function (f, ll) {
                        if (f.properties.nev>0)
                            return L.marker(ll, {icon: L.icon({iconUrl:svgIcon(f.properties.nev),iconSize:[32,32],iconAnchor:[16,16]})});
                        else
                            return L.marker(ll,{icon: alappontIkonok[f.properties.tipus]})
                    }
            }).addTo(map);
            
            function svgIcon(text) {
                return 'data:image/svg+xml;utf8,'+escape('<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50"><rect x="0" y="0" rx="10" ry="10" width="40" height="32" style="fill: #00000050; stroke: none;"/><text x="10" y="22" style="font-family:arial;font-size:20px;fill:white;">'+text+'</text></svg>')
            }
			
			//geoJSON réteg: Poi
			var poi,poidata;
			fetch('layers/rsdPoi.geojson').then(r=>r.json()).then(function(data) {
			poidata=data;
            poi = L.geoJSON(data, {
				pointToLayer: function(f,ll) {
					return L.marker(ll,{icon: getIconPoi(f.properties.tipus)})
				}
			})
			.bindPopup(function (layer)
				{return String(
					"<b>" + layer.feature.properties.nev + "</b>" + "<br>" +
					(layer.feature.properties.nyitva?"Nyitvatartás: " + layer.feature.properties.nyitva + "<br>":"") +
					(layer.feature.properties.telefon?"Telefonszám: " + layer.feature.properties.telefon + "<br>":"") +
					(layer.feature.properties.email?"E-mail: " + layer.feature.properties.email + "<br>":"") +
					(layer.feature.properties.web?"Weboldal: " + layer.feature.properties.web + "<br>":"") +
					(layer.feature.properties.megjegyzes?"<span style='background-color:PaleTurquoise;'>" + layer.feature.properties.megjegyzes + "</span>":"")
					)
				},
				//{permanent: false, opacity: 0.9}
			)
			.bindTooltip(function (layer)
				{return String(layer.feature.properties.nev)},
				{permanent: false, opacity: 0.9, direction: 'right'}
			)
			.addTo(map);
			retegkezelo.addOverlay(poi, 'Helyek');
			});		
			
			function getIconPoi(tipus) {
				return	tipus == 'hotel' ? hotelIkon:
						tipus == 'etterem' ? etteremIkon:
						tipus == 'csh' ? cshIkon:
						tipus == 'strand' ? strandIkon:
						tipus == 'vm' ? vmIkon:
						tipus == 'szobor' ? szoborIkon:
						szoborIkon;
			}

			//geoJSON réteg: Középvonal
            var kvkoord;
			var kozepvonal;
			fetch('layers/rsdVonal.geojson').then(r=>r.json()).then(function(data) {
                kozepvonal = L.geoJSON(data, {
                    style: function(feature) {
                        return {color: "#ff2222", fillOpacity: 1, opacity: 0.5,};
                    }
                })//.addTo(map);
                //retegkezelo.addOverlay(kozepvonal, 'Középvonal');
                kvkoord=kozepvonal.getLayers()[0].feature.geometry.coordinates[0];
                console.log(kvkoord)
			});

			//Rétegsorrend

			function layerOrder() {
				kikotohely.eachLayer(function (layer) {
				layer.setZIndexOffset(2000);
				});
				novenyzet.eachLayer(function (layer) {
				layer.setZIndexOffset(1000);
				});
			}
			
			
			//Tartózkodási hely
			var locmarker = null;
			var loccircle;

			function onLocationFound(e) {
				closeAll();
				document.getElementById('helyesgomb').style.display="flex";
				document.getElementById('helygomb').style.display="none";

				var radius = e.accuracy / 2;
				var loc = e.latlng

				if (locmarker == null) {
					locmarker=L.marker(loc, {icon: helyIkon}).on('click', delLocation).addTo(map);
					loccircle=L.circle(loc, radius).addTo(map);
				}
				else{
					locmarker.setLatLng(loc);
					loccircle.setLatLng(loc);
					loccircle.setRadius(radius);
				}
			}

			function onLocationError(e) {
				alert(e.message);
			}

			function getLocationLeaflet() {
				map.on('locationfound', onLocationFound);
				map.on('locationerror', onLocationError);

				map.locate({setView: true, maxZoom: 16});
			}

			function delLocation() {
				map.removeLayer(locmarker);
				map.removeLayer(loccircle);
				locmarker = null;
				loccircle = null;

				document.getElementById('helyesgomb').style.display="none";
				document.getElementById('helygomb').style.display="flex";
			}
			
			//Kezdőpont
			function locateHome() {
				map.setView([47.434214, 19.087993], 17);
				closemenu();
			}

			//Áttekintőtérkép megnyitása
			function showOverview() {
				closeAll();
    			document.getElementById('attekintoterkep').style.display="block";
				document.getElementById('attekintobezaras').style.display="flex";
				document.getElementById('attekintomegnyitas').style.display="none";
			}

			//Áttekintőtérkép bezárása
			function hideOverview() {
    			document.getElementById('attekintoterkep').style.display="none";
				document.getElementById('attekintobezaras').style.display="none";
				document.getElementById('attekintomegnyitas').style.display="flex";
			}

			//Áttekintőtérkép ugrás
			function kvassayzsilip() {
				map.setView([47.461359, 19.071478], 15);
				hideOverview();
			}

			function pesterzsebet() {
				map.setView([47.429929, 19.090537], 15);
				hideOverview();
			}

			function csepel() {
				map.setView([47.404673, 19.103524], 15);
				hideOverview();
			}

			function soroksar() {
				map.setView([47.394158, 19.109147], 15);
				hideOverview();
			}

			function dunaharaszti() {
				map.setView([47.359229, 19.078669], 15);
				hideOverview();
			}

			function dunavarsany() {
				map.setView([47.312870, 19.035241], 15);
				hideOverview();
			}

			function majoshaza() {
				map.setView([47.271276, 18.990162], 15);
				hideOverview();
			}

			function szigetszentmarton() {
				map.setView([47.227191, 18.967657], 15);
				hideOverview();
			}

			function rackeve() {
				map.setView([47.159151, 18.948833], 15);
				hideOverview();
			}

			function domsod() {
				map.setView([47.095805, 18.997219], 15);
				hideOverview();
			}

			function tassizsilip() {
				map.setView([47.036923, 18.979255], 15);
				hideOverview();
			}

			//Navigáció
			var aPont = null
			var bPont = null
			var aPontVonalon = null
			var bPontVonalon = null
			var tav, utvonal, pl
			var exit = false

			//A pont
			function aPontLerakas(e) {
				if (exit) {
        		return;
    			}
				var location = e.latlng
				if (aPont == null) {
					aPontVonalonKoord = L.GeometryUtil.closest(map, kozepvonal.getLayers()[0], location);
                    if (map.distance(aPontVonalonKoord,location)>200) {
                        alert('A pont túl messze van a vízparttól!');
                        return;
                    }
					aPont = new L.marker(location).addTo(map);
                    console.log(aPontVonalonKoord);
                    aPontVonalon = new L.marker(aPontVonalonKoord)//.addTo(map);
					document.getElementById('kezdopontcimke').style.display="none";
					document.getElementById('vegpontcimke').style.display="block";
                    map.off('click',aPontLerakas);
					map.on('click', bPontLerakas);
				}
			}

			function aPontKijeloles(e) {
				if (exit) {
        		return;
    			}
				map.on('click', aPontLerakas);
				document.getElementById('kezdopontcimke').style.display="block";
				document.getElementById('xutvonaltervgomb').style.display="flex";
				document.getElementById('utvonaltervgomb').style.display="none";
				document.getElementById('xutvonalfelso').style.display="block";
				document.getElementById('utvonalfelso').style.display="none";
				closeAll();
			}

			//B pont
			var lefele
			function bPontLerakas(e) {
				map.off('click',bPontLerakas);
                if (exit) {
        		return;
    			}
				var location = e.latlng
				if (bPont == null) {
					bPont = new L.marker(location).addTo(map);
					bPontVonalon = new L.marker(L.GeometryUtil.closest(map, kozepvonal.getLayers()[0], location))//.addTo(map);
				}
                if (aPontVonalon.getLatLng().lat>bPontVonalon.getLatLng().lat) {
                    // A-B eszak-del
                    var kp=aPont.getLatLng(), kpv=aPontVonalon.getLatLng();
                    var vp=bPont.getLatLng(), vpv=bPontVonalon.getLatLng();
                    lefele=true;
                }
                else {
                    // A-B del-eszak
                    var vp=aPont.getLatLng(), vpv=aPontVonalon.getLatLng();
                    var kp=bPont.getLatLng(), kpv=bPontVonalon.getLatLng();
                    lefele=false;
                }
                utvonal=[kp,kpv];
                // i-t addig növeljük, míg az i. pontja a kv-nak már nincs északabbra a kpv-nél
                for(var i=0;kvkoord[i][1]>kpv.lat&&i<kvkoord.length;i++);
                // i-t tovább növeljük, amíg északabbra vagyunk a vpv-től, és közben minden i. pontot beteszünk az útvonalba
                for(;kvkoord[i][1]>vpv.lat&&i<kvkoord.length;i++)
                    utvonal.push(L.latLng(kvkoord[i].slice().reverse()));
                utvonal.push(vpv);
                utvonal.push(vp);
                pl=L.polyline(utvonal,{color:'#c55a5a'}).addTo(map);
				pontostav=L.GeometryUtil.length(utvonal);
                tav=(Math.round(L.GeometryUtil.length(utvonal)/10))/100;
				
				document.getElementById("tavolsag").innerHTML = tav;
                document.getElementById('vegpontcimke').style.display="none";
				document.getElementById('utvonaladatok').style.display="flex";
				idokiszamitas();
			}

			function idokiszamitas() {
				var sebesseg = document.querySelector('input[name = "hajotipus"]:checked').value;
				var evezestempo = document.getElementById("slider").value/10;
				var ido
				if (lefele) {
					ido = Math.round(pontostav/sebesseg*evezestempo/60*0.9);
				} else {
					ido = Math.round(pontostav/sebesseg*evezestempo/60);
				}

				document.getElementById("idotartam").innerHTML = ido
				console.log(tav);
				console.log(evezestempo);
				console.log(sebesseg);
				console.log(ido);		
			}	

			function openHajourlap() {
				document.getElementById('hajourlapablak').style.display="block";
			}

			function closeHajourlap() {
				document.getElementById('hajourlapablak').style.display="none";
			}
            
            function hajonev(nev) {
                console.log(nev);
                document.getElementById('hajourlapmegnyitas').innerHTML=nev;
            }

			function kilepes() {
				exit = true;
				document.getElementById('kezdopontcimke').style.display="none";
				document.getElementById('vegpontcimke').style.display="none";
				document.getElementById('xutvonaltervgomb').style.display="none";
				document.getElementById('utvonaltervgomb').style.display="flex";
				document.getElementById('xutvonalfelso').style.display="none";
				document.getElementById('utvonalfelso').style.display="block";
				document.getElementById('utvonaladatok').style.display="none";
				document.getElementById('hajourlapablak').style.display="none";
				if (aPont) {
                    map.removeLayer(aPont);
                    map.removeLayer(aPontVonalon);
                }
                if (bPont) {
                    map.removeLayer(bPont);
                    map.removeLayer(bPontVonalon);
                }
                if (utvonal) {
                    map.removeLayer(utvonal);
                    map.removeLayer(pl);
                }
				aPont = null;
				bPont = null;
				aPontVonalon = null;
				bPontVonalon = null;
				utvonal = null;
				pl = null;
				//location = null;
				aPontVonalonKoord = null;
				kilepesutan();
                map.off('click')
			}

			function kilepesutan() {
				exit = false;
                
			}

			/*function bPontKijeloles(e) {
				map.on('click', bPontLerakas);
			}*/

			//menu megnyitas
			function openmenu() {
				closeAll();
				document.getElementById('oldalsav').style.cssText="height: calc(100vh - 5px); width: 100vw; display: flex;"
				document.getElementById('menubezarasgomb').style.display="block";
				document.getElementById('menugomb').style.display="none";
				document.getElementById('container').style.cssText="width: 260px; left: 12px; background-color: #eeeeee; box-shadow: none;";
				document.getElementById('location').style.display="block";
				document.getElementById('location').style.display="block";

				document.getElementById('jelmagyarazatmegnyitas').style.display="flex";
				document.getElementById('nevjegymegnyitas').style.display="flex";
				document.getElementById('egyebgomb').style.display="none";

				var x = document.getElementsByClassName('menuelemszoveg');
				var i;
				for (i = 0; i < x.length; i++) {
					x[i].style.display="block";
				}
			}

			//menu bezaras
			function closemenu() {
				document.getElementById('oldalsav').style.width="";
				document.getElementById('oldalsav').style.height="";
				document.getElementById('oldalsav').style.display="";
				document.getElementById('menubezarasgomb').style.display="none";
				document.getElementById('menugomb').style.display="block";
				document.getElementById('container').removeAttribute('style');
				document.getElementById('location').style.display="none";

				document.getElementById('jelmagyarazatmegnyitas').style.display="none";
				document.getElementById('nevjegymegnyitas').style.display="none";
				document.getElementById('egyebgomb').style.display="block";

				var x = document.getElementsByClassName('menuelemszoveg');
				var i;
				for (i = 0; i < x.length; i++) {
					x[i].style.display="none";
				}
			}

			//Jelmagyarázat megnyitás
			function openLegend() {
				closeAll();
    			document.getElementById('jelmagyarazat').style.display="block";
				document.getElementById('terkep_helye').style.filter="blur(5px)";
				document.getElementById('jelmagyarazatmegnyitas').style.display="none";
				document.getElementById('jelmagyarazatbezaras').style.display="flex";
				document.getElementById('nevjegymegnyitas').style.display="none";
			}

			//Jelmagyarázat bezárás
			function closeLegend() {
    			document.getElementById('jelmagyarazat').style.display="none";
				document.getElementById('terkep_helye').style.filter="none";
				//document.getElementById('jelmagyarazatmegnyitas').style.display="flex";
				document.getElementById('jelmagyarazatbezaras').style.display="none";
				document.getElementById('jelmagyarazatmegnyitas').style.display="none";
			}
			
			//Névjegy megnyitás
			function openCredits() {
				closeAll();
    			document.getElementById('nevjegy').style.display="block";
				document.getElementById('terkep_helye').style.filter="blur(5px)";
				document.getElementById('nevjegymegnyitas').style.display="none";
				document.getElementById('nevjegybezaras').style.display="flex";
				document.getElementById('jelmagyarazatmegnyitas').style.display="none";
			}

			//Névjegy bezárás
			function closeCredits() {
    			document.getElementById('nevjegy').style.display="none";
				document.getElementById('terkep_helye').style.filter="none";
				//document.getElementById('nevjegymegnyitas').style.display="flex";
				document.getElementById('nevjegybezaras').style.display="none";
				document.getElementById('nevjegymegnyitas').style.display="none";
			}

			//Minden elem elrejtése
			function closeAll() {
				closemenu();
				closeLegend();
				closeCredits();
				hideOverview();
				kereseslapbezaras();
			}

			//⛅Időjárás
			//forrás: https://www.studytonight.com/post/how-to-build-a-weather-app-using-javascript-for-complete-beginners
			//feltételek: https://openweathermap.org/weather-conditions

			const api = '44303e3c256ecf2d7c4046440d28f4ae';
			const iconImg = document.getElementById('weather-icon');
			const loc = document.querySelector('#location');
			const tempC = document.querySelector('.c');
			const desc = document.querySelector('.desc');

			
			// weather data
            /*var weatherQueryTiming = setInterval(weatherQuery, 5000);
			function weatherQuery() {

				var kozeppont = L.latLng(map.getCenter());
				var kplon = kozeppont.lng;
				var kplat = kozeppont.lat;
				
				console.log(kozeppont);
				console.log(kplon);
				console.log(kplat);

				var base = `https://api.openweathermap.org/data/2.5/weather?lat=${kplat}&lon=${kplon}&appid=${api}&units=metric`;

				// Using fetch to get data
				fetch(base)
					.then((response) => {
					return response.json();
					})
					.then((data) => {
					const { temp } = data.main;
					const place = data.name;
					const { description, icon } = data.weather[0];
					const iconUrl = `imagemap/weather/${icon}.png`;
					//console.log(iconUrl);
					// Interacting with DOM to show data
					iconImg.src = iconUrl;
					loc.textContent = `${place}`;
					desc.textContent = `${description}`;
					tempC.textContent = `${temp.toFixed(0)} °C`;
					});
			};*/

			//KERESÉS
			function kereseslapmegnyitas() {
				closeAll();
				kilepes();
				document.getElementById('kereses').style.display="grid";

				if (window.innerHeight > window.innerWidth){
					document.getElementById('keresestarto').style.cssText="height: auto; width: calc(100vw - 30px); top: 7px; left: 7px; padding: 8px; border-radius: 12px; background-color: #ffffff44; backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); box-shadow: 0px 0px 15px #3534342d;";
				} else {
					document.getElementById('keresestarto').style.cssText="height: auto; width: 300px; padding: 8px; border-radius: 12px; background-color: #ffffff44; backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); box-shadow: 0px 0px 15px #3534342d;";
				};
				
				document.getElementById('sav').style.cssText="margin-top: 12px; align-self: center; width: 80%; background-color: #00000033; box-shadow: none; border: 1px solid #ffffff55; color: white;";
				document.getElementById('keresomezo').style.display="block";
				document.getElementById("keresomezo").focus();
				document.getElementById('keressgomb').style.display="block";
				document.getElementById('keresesvissza').style.display="block";

				var x = document.getElementsByClassName('helykitolto');
				var i;
				for (i = 0; i < x.length; i++) {
					x[i].style.display="none";
				}
			};

			function kereseslapbezaras() {
				document.getElementById('kereses').style.display="none";
				document.getElementById('sav').style.width='';
				document.getElementById('sav').style.borderRadius='';
				document.getElementById('sav').style.left='';
				document.getElementById('sav').style.top='';
				document.getElementById('sav').style.backgroundColor='';
				document.getElementById('sav').style.boxShadow='';
				document.getElementById('sav').style.color='';
				document.getElementById('sav').style.marginTop='';
				document.getElementById('sav').style.alignSelf='';
				document.getElementById('keresestarto').style.height='';
				document.getElementById('keresestarto').style.width='';
				document.getElementById('keresestarto').style.background='';
				document.getElementById('keresestarto').style.borderRadius='';
				document.getElementById('keresestarto').style.boxShadow='';
				document.getElementById('keresestarto').style.padding='';
				document.getElementById('keresestarto').style.left='';
				document.getElementById('keresestarto').style.top='';
				document.getElementById('keresomezo').style.display="none";
				document.getElementById('keressgomb').style.display="none";
				document.getElementById('keresesvissza').style.display="none";
				document.getElementById('talalatok').style.display="none";

				document.getElementById('keresomezo').value='';

				var x = document.getElementsByClassName('helykitolto');
				var i;
				for (i = 0; i < x.length; i++) {
					x[i].style.display="block";
				}
			};



			/*function keress() {
				var kifejezes = document.getElementById('keresomezo').value;
				var talalat = _.find(cities.locations, {'title': kifejezes});
				if (!talalat)
					window.alert('Nincs találat');
				else
					window.alert('Go to ' + talalat.url);
			}*/

			/*function keress() {
				var kifejezes = document.getElementById('keresomezo').value;
				var talalat = _.find(poi.features[i].properties , {'nev': kifejezes});
				var talalatkoord = talalat.properties.geometry.coordinates;
				if (!talalat)
					window.alert('Nincs találat');
				else
					map.setView(talalatkoord, 15);
				console.log(talalat);
				//console.log(kifejezes);
				console.log(poi);
			};	*/

			
			function keress() {
				var hintlist = document.getElementById('javaslatok');
                var hintlayer = poi.getLayers();
                for (var i=0; i < hintlayer.length; i++) {
                    name = hintlayer[i].feature.properties['nev'];
                    hintlist.innerHTML+='<option value="'+name+'"/>';
                }
				//console.log(poidata);

				var talalat;
				var talalatnev;
				var kifejezes = document.getElementById('keresomezo').value;
				for (var i=0 ; i < poidata.features.length ; i++) {
					if (poidata.features[i].properties.nev.toLowerCase() == kifejezes.toLowerCase()) {
						talalat = (poidata.features[i].geometry.coordinates);
						talalatnev = (poidata.features[i].properties.nev);
					}
				}
				if (talalat == null) {
					window.alert('Nincs találat');
				}
				else {
				var helyestalalat = talalat.reverse();
				//console.log(helyestalalat);
				map.setView(helyestalalat, 19);
				};
				
				//console.log(talalatnev);
				//console.log(talalatdoboz);
			}

			function hint(text) {
                // finds all objects on layer group 'poi' containing 'text' in 'nev' attribute
                // and puts names into 'hint' div
                var hintlist = document.getElementById('javaslatok');
                hintlist.innerHTML='';
                var t = text.toLowerCase();
                var hintlayer = poi.getLayers();
                for (var i=0; i < hintlayer.length; i++) {
                    name = hintlayer[i].feature.properties['nev'];
                    if (name.toLowerCase().indexOf(t)>=0) {
                        hintlist.innerHTML+='<div class="hint" onclick="setSearch(\''+name+'\');clearHints();">'+name+'</div>';
                    }
                }
            }

			function keresstipust(data) {
				
				document.getElementById('talalatok').style.display="block";

				var talalattabla = [];
				for (var i=0 ; i < poidata.features.length ; i++) {
					if (poidata.features[i].properties.tipus == data) {
						talalat = (poidata.features[i].geometry.coordinates);
						talalatnev = (poidata.features[i].properties.nev);
						talalattabla.push(talalatnev);
					}
				}

				//console.log(talalatnev);
				//console.log(talalattabla);

				document.getElementById('talalatlista').innerHTML = '';

				talalattabla.forEach(function (item) {
					var elem = document.createElement('li');
					talalatlista.appendChild(elem);
					elem.innerHTML += item;

					elem.onclick = function() {
						document.getElementById('keresomezo').value=elem.innerHTML;
						keress();
					}
				});

				
								
			}			
				
		</script>
		
	</body>
	
</html>
